Simple Modern Art Protocol
====

競りゲームの傑作「モダンアート」を単純化し、ソケット通信でAI同士の対戦ができるようにしたものです。
サーバーと、通信周りの面倒ごとを処理済みのPythonクライアントテンプレートが入っています。

## デモ

5人、微妙に賢いエージェントの対戦。

<img src="/image/modern.gif?raw=true">

## とりあえず試したい

    git clone https://github.com/calups/modernart_protocol
    cd modernart_protocol
    python Server/SimpleModern.py &
    ./5mura.sh

サーバーとサンプルエージェント5体が立ち上がります。

## シンプルモダンアート

プレイ（と実装）を簡単にするため、ルールを単純にしました。
正規ルール版もいずれ作るかもしれません。

### ルール（知ってる人向け）

- 競りの種類が「入札」（握り込み）だけに。
- 当然ダブルオークションもない。
- 所持金が公開情報に。正規ルールでも正確にカウンティングすればわかってしまうため。
- プレイヤー間での会話は不可。出品する絵と入札金額で想いを伝えよう。

上記4点以外は正規のルールと全く同じです。
3人プレイ用の選択ルール、ダブルオークションに関する選択ルールは使用しません。

正規ルールはhttp://www.newgamesorder.jp/games/modernart
の下の方にあるモダンアート.pdfからダウンロードできます。

## 必要環境

Python3で動作確認。
特別なモジュールは必要ない（はず）

## エージェントの作り方

sample_agent.pyの関数を書き換えて自分だけのモダンアートエージェントを作りましょう。
値を返す必要がある関数はsellとbidだけです。

sellは自分の出品ターンが回ってきた時にどの絵を出すか、
bidは出品された絵に対していくらで入札するかを返します。

ソケット通信部分を実装すれば、Python以外のエージェントも接続可能です。

## 通信方法の概要

基本的にクライアントへの通信は以下のjson形式になっています。
文字列から起こすライブラリを使って復元してください。

    {
        'request': REQUEST
        'arg': ARG
        'info': INFO
    }

requestにはINITIALIZE、SELL、BIDなど、どんな処理を要求しているかが格納されています。

argにはrequestごとに異なる種類の情報が格納されています。
例えばPURCHASEならば誰が何をいくらで誰から落札したのかと入札金額、
ROUNDOVERならば清算金額などがわかります。

infoにはその他の公開情報が格納されています。場に出ている絵の数や所持金はここから確認できます。

サーバーへの返答は全て、単に非負整数一つを返すだけで済みます。
SELLでは絵の番号(0,1,2,3,4)を、BIDでは入札額を送ってください。

なお、手札にない絵を選択した場合は手札からランダムで勝手に出品されます。
入札額は0から所持金全額の範囲でクランプされます。

## infoについて

大抵のリクエストで送られてくるinfoには、以下の形式でゲーム情報が格納されています。

    info = {
            "player_size": player_size,
            "total_paintings": [12, 13, 14, 15, 16],
            "base_value": [0, 0, 0, 0, 0], #これまでの累積価値。
            "remaining_round": 4, #残りラウンドの数。
            "turn_player": 0,
            "purchased_paintings": [], #このラウンドで購入された絵。購入順に格納される。
            "player": [{ #各プレイヤーのデータが格納される。
                "id": i,
                "cash": 100,
                "hand": [], #手札。自分以外の手札はintで枚数だけ与えられる。
                "purchased": [] #このラウンドの購入済みの絵。
            } for i in range(player_size)],
        }

## 最後に

人狼知能プロトコル(http://aiwolf.org/protocol)

及び、その公認Pythonパッケージである
AIWolfPy
(https://github.com/k-harada/AIWolfPy)

を参考にさせていただきました。ありがとうございます。